<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pip-Boy 3000 - Professional Edition</title>
    <style>
        :root {
            --pip-green: #1aff80;
            --pip-green-dim: rgba(26, 255, 128, 0.15);
            --pip-green-med: rgba(26, 255, 128, 0.4);
            --pip-glow: 0 0 12px rgba(26, 255, 128, 0.65);
            --crt-curve: perspective(1200px) rotateX(2deg) rotateY(-1deg);
        }

        * { box-sizing: border-box; cursor: crosshair; user-select: none; }

        body {
            background-color: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            font-family: 'Courier New', Courier, monospace;
            overflow: hidden;
            color: var(--pip-green);
            text-transform: uppercase;
        }

        /* --- HARDWARE CHASSIS --- */
        .pipboy-frame {
            width: 950px;
            height: 720px;
            position: relative;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            background-image: url('assets/screen/monitorborder.png');
            transition: filter 0.5s ease;
        }

        .off .pipboy-frame {
            background-image: url('assets/screen/monitorborder-off.png');
            filter: brightness(0.3) contrast(1.2);
        }

        /* --- SCREEN AREA --- */
        .screen-area {
            position: absolute;
            top: 95px;
            left: 115px;
            width: 710px;
            height: 465px;
            background-image: url('assets/screen/bg.png');
            background-size: cover;
            overflow: hidden;
            border-radius: 30px;
            transform: var(--crt-curve);
            display: flex;
            flex-direction: column;
            z-index: 1;
            box-shadow: inset 0 0 100px rgba(0,0,0,0.9);
        }

        .off .screen-area {
            background-image: url('assets/screen/bg-off.png');
        }

        .crt-post-processing {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: 100;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.1) 50%),
                        linear-gradient(90deg, rgba(255, 0, 0, 0.03), rgba(0, 255, 0, 0.01), rgba(0, 0, 255, 0.03));
            background-size: 100% 3px, 3px 100%;
        }

        .screen-flicker {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(26, 255, 128, 0.02);
            opacity: 0;
            z-index: 99;
            animation: flicker 0.15s infinite;
        }

        @keyframes flicker {
            0% { opacity: 0.01; } 50% { opacity: 0.03; } 100% { opacity: 0.01; }
        }

        /* --- UI COMPONENTS --- */
        .ui-wrapper {
            padding: 30px 50px;
            height: 100%;
            display: flex;
            flex-direction: column;
            transition: opacity 0.3s ease;
            text-shadow: var(--pip-glow);
        }

        .off .ui-wrapper { opacity: 0; pointer-events: none; }

        header { border-bottom: 2px solid var(--pip-green); margin-bottom: 15px; }
        
        .nav-primary {
            display: flex;
            justify-content: space-around;
            padding-bottom: 10px;
        }

        .nav-tab {
            font-size: 1.6rem;
            font-weight: 900;
            opacity: 0.3;
            letter-spacing: 4px;
            transition: 0.2s;
            cursor: pointer;
        }

        .nav-tab.active { opacity: 1; text-shadow: 0 0 15px var(--pip-green); border-bottom: 4px solid var(--pip-green); }

        .nav-secondary {
            display: flex;
            justify-content: center;
            gap: 25px;
            padding: 10px 0;
            font-size: 0.85rem;
        }

        .sub-tab {
            padding: 3px 12px;
            opacity: 0.5;
            cursor: pointer;
        }

        .sub-tab.active {
            background: var(--pip-green);
            color: #0b140e;
            opacity: 1;
            text-shadow: none;
        }

        /* --- VIEWPORT ENGINE --- */
        #viewport { flex: 1; overflow: hidden; position: relative; margin-top: 5px; }

        .list-layout {
            display: grid;
            grid-template-columns: 1.2fr 0.8fr;
            gap: 25px;
            height: 100%;
        }

        .scroll-list {
            overflow-y: auto;
            border-right: 1px solid var(--pip-green-dim);
            padding-right: 15px;
        }

        .scroll-list::-webkit-scrollbar { width: 6px; }
        .scroll-list::-webkit-scrollbar-thumb { background: var(--pip-green-med); border-radius: 3px; }

        .list-item {
            padding: 10px 15px;
            margin-bottom: 6px;
            display: flex;
            justify-content: space-between;
            font-size: 1.1rem;
            cursor: pointer;
            border: 1px solid transparent;
        }

        .list-item:hover { background: var(--pip-green-dim); }

        .list-item.active {
            background: var(--pip-green);
            color: #000;
            font-weight: bold;
            text-shadow: none;
        }

        .detail-pane {
            border: 1px solid var(--pip-green-med);
            background: rgba(0,0,0,0.5);
            padding: 20px;
            font-size: 0.9rem;
            line-height: 1.5;
            display: flex;
            flex-direction: column;
        }

        /* --- MAP SYSTEM --- */
        .map-container {
            width: 100%;
            height: 100%;
            position: relative;
            background: radial-gradient(circle, var(--pip-green-dim) 1px, transparent 1px);
            background-size: 30px 30px;
            border: 1px solid var(--pip-green-med);
        }

        .map-marker {
            position: absolute;
            width: 12px;
            height: 12px;
            background: var(--pip-green);
            box-shadow: var(--pip-glow);
            border-radius: 2px;
        }

        .player-marker {
            position: absolute;
            top: 50%; left: 50%;
            width: 16px; height: 16px;
            background: #fff;
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(1.5); opacity: 0; }
        }

        /* --- STATS & VAULT BOY --- */
        .cnd-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            height: 100%;
            align-items: center;
        }

        .vault-boy-container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 280px;
            position: relative;
        }

        .vault-boy-img {
            height: 100%;
            filter: sepia(100%) saturate(400%) hue-rotate(85deg) brightness(1.2);
        }

        /* --- BARS --- */
        .stat-group { margin-bottom: 20px; }
        .bar-label { display: flex; justify-content: space-between; font-size: 0.8rem; margin-bottom: 5px; }
        .bar-outer { height: 12px; border: 1px solid var(--pip-green); padding: 1px; }
        .bar-inner { height: 100%; background: var(--pip-green); box-shadow: var(--pip-glow); transition: width 0.8s ease; }

        /* --- FOOTER --- */
        footer {
            height: 55px;
            border-top: 2px solid var(--pip-green);
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1rem;
            padding: 0 15px;
            margin-top: 10px;
        }

        /* --- HARDWARE --- */
        .power-btn {
            position: absolute;
            bottom: 65px;
            right: 145px;
            width: 80px;
            height: 80px;
            z-index: 1000;
            cursor: pointer;
            border-radius: 50%;
        }
    </style>
</head>
<body class="off" id="root">

<div class="pipboy-frame">
    <div class="screen-area">
        <div class="crt-post-processing"></div>
        <div class="screen-flicker"></div>
        
        <div class="ui-wrapper">
            <header>
                <div class="nav-primary">
                    <div class="nav-tab active" data-tab="STAT">STAT</div>
                    <div class="nav-tab" data-tab="INV">INV</div>
                    <div class="nav-tab" data-tab="DATA">DATA</div>
                </div>
                <div class="nav-secondary" id="sub-nav-container"></div>
            </header>

            <main id="viewport"></main>

            <footer>
                <div id="hp-text">HP 210/210</div>
                <div id="lvl-text">LEVEL 32</div>
                <div id="ap-text">AP 105/105</div>
            </footer>
        </div>
    </div>

    <div class="power-btn" onclick="pipboy.togglePower()"></div>
</div>

<script>
const DATA = {
    STAT: {
        subs: ['CND', 'SPECIAL', 'PERKS', 'GENERAL'],
        content: {
            CND: {
                limbs: [
                    { n: 'HEAD', v: 100 },
                    { n: 'TORSO', v: 82 },
                    { n: 'L. ARM', v: 100 },
                    { n: 'R. ARM', v: 45 },
                    { n: 'L. LEG', v: 95 },
                    { n: 'R. LEG', v: 90 }
                ]
            },
            SPECIAL: [
                { name: 'STRENGTH', val: 7, desc: 'Your physical power. Influences carry weight and melee damage.' },
                { name: 'PERCEPTION', val: 8, desc: 'Sensory awareness. Affects weapon accuracy in V.A.T.S.' },
                { name: 'ENDURANCE', val: 6, desc: 'Overall wellness. Increases total Hit Points.' },
                { name: 'CHARISMA', val: 10, desc: 'Leadership and diplomacy. Better prices at shops.' },
                { name: 'INTELLIGENCE', val: 9, desc: 'Knowledge and logic. Improves hacking and experience gain.' },
                { name: 'AGILITY', val: 7, desc: 'Reflexes and finesse. Grants more Action Points.' },
                { name: 'LUCK', val: 5, desc: 'Fortune. Increases critical hit recharge rates.' }
            ],
            PERKS: [
                { name: 'BLOODY MESS', val: 'Rank 2', desc: 'Enemies often explode in a shower of gore.' },
                { name: 'MYSTERIOUS STRANGER', val: 'Rank 1', desc: 'A guardian angel appears in V.A.T.S. to help.' },
                { name: 'SCIENCE!', val: 'Rank 4', desc: 'Access to high-tech energy weapon mods.' }
            ],
            GENERAL: [
                { name: 'KARMA', val: 'SAVIOR', desc: 'You are a beacon of hope for the wasteland.' },
                { name: 'REPUTATION', val: 'IDOLIZED', desc: 'Towns celebrate your arrival.' }
            ]
        }
    },
    INV: {
        subs: ['WEAPONS', 'APPAREL', 'AID', 'MISC', 'AMMO'],
        content: {
            WEAPONS: [
                { name: '10MM PISTOL', val: '22 DMG', desc: 'Standard semi-automatic sidearm.' },
                { name: 'LASER RIFLE', val: '48 DMG', desc: 'Aerospace-grade energy rifle.' },
                { name: 'COMBAT KNIFE', val: '12 DMG', desc: 'Serrated blade for close encounters.' },
                { name: 'MINIGUN', val: '80 DMG', desc: 'Whirring death. Requires heavy ammo.' }
            ],
            APPAREL: [
                { name: 'VAULT SUIT', val: '5 DR', desc: 'Sturdy blue and gold jumpsuit.' },
                { name: 'LEATHER ARMOR', val: '15 DR', desc: 'Reinforced leather padding.' },
                { name: 'POWER ARMOR', val: '60 DR', desc: 'The pinnacle of pre-war protection.' }
            ],
            AID: [
                { name: 'STIMPAK', val: 'x12', desc: 'Restores 30% total health.' },
                { name: 'RAD-AWAY', val: 'x05', desc: 'Removes 200 units of radiation.' },
                { name: 'PURIFIED WATER', val: 'x20', desc: 'Clean, safe hydration.' }
            ],
            AMMO: [
                { name: '10MM ROUND', val: '450', desc: 'Used by standard pistols.' },
                { name: 'FUSION CELL', val: '220', desc: 'Energy source for laser weapons.' }
            ]
        }
    },
    DATA: {
        subs: ['MAP', 'QUESTS', 'RADIO'],
        content: {
            QUESTS: [
                { name: 'THE BIG TOWN', val: 'ACTIVE', desc: 'Help the residents defend against raiders.' },
                { name: 'REPLICATED MAN', val: 'ACTIVE', desc: 'Find the missing android in Rivet City.' },
                { name: 'RADIO FREEDOM', val: 'DONE', desc: 'Restored the signal to the Minutemen.' }
            ],
            RADIO: [
                { name: 'GALAXY NEWS RADIO', val: 'ON', desc: 'Broadcasting from the Capital.' },
                { name: 'ENCLAVE RADIO', val: 'OFF', desc: 'Propaganda and military marches.' },
                { name: 'DIAMOND CITY RADIO', val: 'OFF', desc: 'The hits of tomorrow, today!' }
            ]
        }
    }
};

const pipboy = {
    isOn: false,
    currentTab: 'STAT',
    currentSub: 'CND',

    init() {
        this.renderSubNav();
        this.renderViewport();
        this.bindEvents();
    },

    togglePower() {
        this.isOn = !this.isOn;
        document.getElementById('root').className = this.isOn ? '' : 'off';
        if (this.isOn) {
            const flicker = document.querySelector('.screen-flicker');
            flicker.style.animation = 'flicker 0.05s infinite';
            setTimeout(() => flicker.style.animation = 'flicker 0.15s infinite', 500);
        }
    },

    bindEvents() {
        document.querySelectorAll('.nav-tab').forEach(tab => {
            tab.onclick = () => {
                if (!this.isOn) return;
                document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                this.currentTab = tab.dataset.tab;
                this.currentSub = DATA[this.currentTab].subs[0];
                this.renderSubNav();
                this.renderViewport();
            };
        });
    },

    renderSubNav() {
        const container = document.getElementById('sub-nav-container');
        container.innerHTML = '';
        DATA[this.currentTab].subs.forEach(sub => {
            const el = document.createElement('div');
            el.className = `sub-tab ${sub === this.currentSub ? 'active' : ''}`;
            el.innerText = sub;
            el.onclick = () => {
                this.currentSub = sub;
                this.renderSubNav();
                this.renderViewport();
            };
            container.appendChild(el);
        });
    },

    renderViewport() {
        const vp = document.getElementById('viewport');
        vp.innerHTML = '';
        const content = DATA[this.currentTab].content[this.currentSub];

        if (this.currentSub === 'CND') {
            this.renderCondition(vp, content);
        } else if (this.currentSub === 'MAP') {
            this.renderMap(vp);
        } else {
            this.renderList(vp, content || []);
        }
    },

    renderMap(container) {
        container.innerHTML = `
            <div class="map-container">
                <div class="player-marker"></div>
                <div class="map-marker" style="top:20%; left:30%;"></div>
                <div class="map-marker" style="top:70%; left:80%;"></div>
                <div class="map-marker" style="top:45%; left:15%;"></div>
                <div style="position:absolute; bottom:10px; left:10px; font-size:0.8rem;">MEGATON: DISCOVERED</div>
            </div>
        `;
    },

    renderCondition(container, data) {
        const isHurt = data.limbs.some(l => l.v < 50);
        const imgPath = isHurt ? 'assets/screen/vbbrokenarm.png' : 'assets/screen/vbnormal.png';
        
        container.innerHTML = `
            <div class="cnd-layout">
                <div class="vault-boy-container">
                    <img src="${imgPath}" class="vault-boy-img">
                </div>
                <div class="stats-panel">
                    ${data.limbs.map(l => `
                        <div class="stat-group">
                            <div class="bar-label"><span>${l.n}</span><span>${l.v}%</span></div>
                            <div class="bar-outer"><div class="bar-inner" style="width: ${l.v}%"></div></div>
                        </div>
                    `).join('')}
                </div>
            </div>
        `;
    },

    renderList(container, items) {
        const frame = document.createElement('div');
        frame.className = 'list-layout';
        
        const list = document.createElement('div');
        list.className = 'scroll-list';
        
        const details = document.createElement('div');
        details.className = 'detail-pane';
        details.id = 'detail-view';

        items.forEach((item, idx) => {
            const div = document.createElement('div');
            div.className = `list-item ${idx === 0 ? 'active' : ''}`;
            div.innerHTML = `<span>${item.name}</span><span>${item.val || ''}</span>`;
            div.onclick = () => {
                document.querySelectorAll('.list-item').forEach(i => i.classList.remove('active'));
                div.classList.add('active');
                details.innerHTML = `<h2 style="margin-top:0">${item.name}</h2><p>${item.desc}</p>`;
            };
            list.appendChild(div);
            if (idx === 0) details.innerHTML = `<h2 style="margin-top:0">${item.name}</h2><p>${item.desc}</p>`;
        });

        frame.appendChild(list);
        frame.appendChild(details);
        container.appendChild(frame);
    }
};

window.onload = () => pipboy.init();
</script>
</body>
</html>
