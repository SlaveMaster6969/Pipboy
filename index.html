<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pip-Boy 3000 - Advanced Replica</title>
    <style>
        /* AUTHENTIC PIP-BOY 3000 STYLING */
        :root {
            --pip-green: #1aff80;
            --pip-green-dim: rgba(26, 255, 128, 0.12);
            --pip-green-med: rgba(26, 255, 128, 0.4);
            --pip-glow: rgba(26, 255, 128, 0.6);
            --pip-bg: #0b140e;
            --crt-curve: perspective(1200px) rotateX(2.5deg) rotateY(-1.5deg);
        }

        * { 
            box-sizing: border-box;
            cursor: default;
        }

        body {
            background-color: #020202;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            font-family: 'Courier New', Courier, monospace;
            overflow: hidden;
            color: var(--pip-green);
            text-transform: uppercase;
        }

        /* --- HARDWARE CHASSIS --- */
        .pipboy-module {
            width: 900px;
            height: 680px;
            position: relative;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            background-image: url('assets/screen/monitorborder.png'); 
            transition: background-image 0.2s;
        }

        .pipboy-module.off {
            background-image: url('assets/screen/monitorborder-off.png');
            filter: brightness(0.2);
        }

        /* --- CRT SCREEN CONTAINER --- */
        .screen-area {
            position: absolute;
            top: 85px;
            left: 110px;
            width: 670px;
            height: 440px;
            background-image: url('assets/screen/bg.png');
            background-size: cover;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            color: var(--pip-green);
            text-shadow: 0 0 5px var(--pip-glow);
            z-index: 1;
            border-radius: 25px;
            transform: var(--crt-curve);
            box-shadow: inset 0 0 60px rgba(0,0,0,1), 0 0 20px rgba(26, 255, 128, 0.1);
            border: 2px solid #152515;
        }

        .off .screen-area { display: none; }

        .scanlines {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%);
            background-size: 100% 3px;
            z-index: 50;
            pointer-events: none;
            opacity: 0.8;
        }

        .screen-area::before {
            content: " ";
            display: block;
            position: absolute;
            top: 0; left: 0; bottom: 0; right: 0;
            background: rgba(26, 255, 128, 0.02);
            opacity: 0;
            z-index: 49;
            pointer-events: none;
            animation: static-noise 0.2s infinite;
        }

        @keyframes static-noise {
            0% { transform: translate(0,0) }
            10% { transform: translate(-1%,-1%) }
            20% { transform: translate(1%,1%) }
            100% { transform: translate(0,0) }
        }

        /* --- HEADER & NAVIGATION --- */
        header { padding: 20px 50px 0 50px; z-index: 10; }
        .main-nav { display: flex; justify-content: space-between; border-bottom: 4px solid var(--pip-green); padding-bottom: 2px; }
        .nav-item { cursor: pointer; font-size: 1.6rem; font-weight: 900; letter-spacing: 4px; opacity: 0.4; transition: 0.1s; user-select: none; }
        .nav-item.active { opacity: 1; text-shadow: 0 0 15px var(--pip-green); }

        .sub-nav { display: flex; justify-content: center; gap: 20px; padding: 10px 0; font-size: 0.85rem; font-weight: bold; }
        .sub-tab { cursor: pointer; opacity: 0.6; padding: 2px 8px; transition: 0.15s; position: relative; }
        .sub-tab.active { opacity: 1; background: var(--pip-green); color: #0b140e; text-shadow: none; }

        #viewport { flex-grow: 1; padding: 10px 50px; overflow-y: hidden; position: relative; z-index: 5; }

        /* --- FOOTER --- */
        footer { height: 50px; border-top: 3px solid var(--pip-green); margin: 0 50px; display: flex; justify-content: space-between; align-items: center; font-weight: 900; font-size: 0.9rem; background: rgba(0,0,0,0.4); }
        .footer-stat-group { display: flex; gap: 20px; }

        /* --- REUSABLE COMPONENTS --- */
        .list-container { display: grid; grid-template-columns: 1.2fr 0.8fr; gap: 20px; height: 100%; }
        .scroll-list { height: 260px; overflow-y: auto; border-right: 1px solid var(--pip-green-dim); padding-right: 10px; }
        .list-entry { padding: 6px 12px; margin-bottom: 2px; cursor: pointer; display: flex; justify-content: space-between; font-size: 0.95rem; }
        .list-entry.selected { background: var(--pip-green-med); color: #fff; border-left: 4px solid var(--pip-green); }

        .detail-box { border: 2px solid var(--pip-green); padding: 15px; background: rgba(0,0,0,0.5); font-size: 0.8rem; line-height: 1.5; flex-grow: 1; overflow-y: auto; height: 100%; }
        .detail-box h3 { margin-top: 0; color: var(--pip-green); border-bottom: 1px solid var(--pip-green-med); padding-bottom: 5px; }

        /* Progress Bars */
        .progress-bar-wrap { margin-bottom: 12px; }
        .pb-label { display: flex; justify-content: space-between; font-size: 0.75rem; margin-bottom: 4px; }
        .pb-outer { height: 10px; border: 1px solid var(--pip-green); padding: 1px; background: rgba(0,0,0,0.3); }
        .pb-inner { height: 100%; background: var(--pip-green); box-shadow: 0 0 8px var(--pip-green); transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1); }

        /* Condition Layout with Assets */
        .condition-layout { display: grid; grid-template-columns: 1.1fr 0.9fr; height: 100%; align-items: flex-start; gap: 10px; }
        .vault-boy-visual { display: flex; justify-content: center; align-items: center; position: relative; height: 260px; background: rgba(26, 255, 128, 0.05); border-radius: 10px; }
        
        .vault-boy-img {
            width: 170px;
            height: auto;
            filter: sepia(100%) saturate(300%) hue-rotate(80deg) brightness(1.1);
        }

        .limb-indicator {
            position: absolute;
            font-size: 0.65rem;
            font-weight: bold;
            border: 1px solid var(--pip-green);
            padding: 2px 6px;
            background: black;
            box-shadow: 0 0 5px var(--pip-green-dim);
            transition: all 0.3s;
        }

        .limb-head { top: 10px; left: 50%; transform: translateX(-50%); }
        .limb-la { top: 90px; left: 10px; }
        .limb-ra { top: 90px; right: 10px; }
        .limb-ll { bottom: 10px; left: 25%; }
        .limb-rl { bottom: 10px; right: 25%; }

        /* Local Map Component */
        .map-container {
            width: 100%;
            height: 280px;
            border: 2px solid var(--pip-green);
            background: #050a05;
            position: relative;
            overflow: hidden;
            background-image: 
                linear-gradient(var(--pip-green-dim) 1px, transparent 1px),
                linear-gradient(90deg, var(--pip-green-dim) 1px, transparent 1px);
            background-size: 30px 30px;
        }

        .map-marker {
            position: absolute;
            width: 12px;
            height: 12px;
            background: white;
            border: 2px solid var(--pip-green);
            border-radius: 50%;
            animation: pulse-marker 1.5s infinite;
        }

        .map-label {
            position: absolute;
            font-size: 0.7rem;
            background: black;
            border: 1px solid var(--pip-green);
            padding: 2px 5px;
            pointer-events: none;
        }

        @keyframes pulse-marker {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.5); opacity: 0.5; }
            100% { transform: scale(1); opacity: 1; }
        }

        /* Radio Waveform */
        .radio-visualizer {
            display: flex;
            align-items: flex-end;
            gap: 2px;
            height: 40px;
            margin-top: 10px;
        }

        .wave-bar {
            width: 4px;
            background: var(--pip-green);
            animation: wave-bounce 0.5s infinite alternate;
        }

        @keyframes wave-bounce {
            from { height: 10%; }
            to { height: 100%; }
        }

        /* Effects */
        .flicker-heavy { animation: heavy-flicker-anim 0.1s steps(2) infinite; }
        @keyframes heavy-flicker-anim {
            0% { opacity: 1; filter: contrast(1.2) brightness(1.2); }
            50% { opacity: 0.7; filter: contrast(0.8) brightness(0.6); }
            100% { opacity: 1; }
        }

        .tab-transition { animation: slide-in 0.2s ease-out; }
        @keyframes slide-in { from { transform: translateX(20px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }

        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-thumb { background: var(--pip-green); }

        .btn-power { position: absolute; bottom: 60px; right: 140px; width: 70px; height: 70px; cursor: pointer; z-index: 100; }
    </style>
</head>
<body>

<div class="pipboy-module" id="pip-chassis">
    <div class="screen-area" id="crt-screen">
        <div class="scanlines"></div>
        <header>
            <nav class="main-nav">
                <div class="nav-item active" onclick="ui.changeMainTab('STAT', this)">STAT</div>
                <div class="nav-item" onclick="ui.changeMainTab('INV', this)">INV</div>
                <div class="nav-item" onclick="ui.changeMainTab('DATA', this)">DATA</div>
            </nav>
            <div class="sub-nav" id="sub-nav"></div>
        </header>
        <main id="viewport"></main>
        <footer>
            <div class="footer-stat-group">
                <span id="f-hp">HP 0/0</span>
                <span id="f-lvl">LEVEL 42</span>
            </div>
            <div class="footer-stat-group">
                <span id="f-ap">AP 110/110</span>
                <span id="system-status">STABLE</span>
            </div>
        </footer>
    </div>
    <div class="btn-power" onclick="ui.togglePower()"></div>
</div>

<script>
/**
 * PIP-BOY 3000 CORE ENGINE
 * EXTENDED DATA & SIMULATION LOGIC
 */

const DATA_CORE = {
    STAT: {
        tabs: ['CND', 'SPECIAL', 'SKILLS', 'PERKS', 'GENERAL'],
        content: {
            CND: {
                limbs: { head: 100, la: 100, ra: 100, ll: 100, rl: 100 },
                vitals: [
                    { label: 'RADS', val: 12, max: 1000 },
                    { label: 'WEIGHT', val: 185, max: 250 },
                    { label: 'TEMP', val: 98, max: 110 }
                ]
            },
            SPECIAL: [
                { id: 'S', name: 'STRENGTH', val: 7, desc: 'A measure of your raw physical power. It affects how much you can carry, and the damage of all melee attacks.' },
                { id: 'P', name: 'PERCEPTION', val: 8, desc: 'A sensing ability that affects weapon accuracy in V.A.T.S. and your awareness of environmental threats.' },
                { id: 'E', name: 'ENDURANCE', val: 6, desc: 'A measure of your overall physical fitness. It affects your total Hit Points and resistances.' },
                { id: 'C', name: 'CHARISMA', val: 9, desc: 'Your ability to charm and convince others. It affects your success in speech and barter.' },
                { id: 'I', name: 'INTELLIGENCE', val: 10, desc: 'A measure of your overall mental acuity. Affects the number of Skill Points you earn per level.' },
                { id: 'A', name: 'AGILITY', val: 7, desc: 'A measure of your overall finesse and reflexes. It affects the number of Action Points available.' },
                { id: 'L', name: 'LUCK', val: 6, desc: 'Luck affects everything you do, from critical hits to finding better loot in containers.' }
            ],
            SKILLS: [
                { name: 'BARTER', val: 45, info: 'Prices for items.' },
                { name: 'ENERGY WEAPONS', val: 82, info: 'Damage with laser/plasma.' },
                { name: 'EXPLOSIVES', val: 30, info: 'Grenade damage/defusal.' },
                { name: 'LOCKPICK', val: 75, info: 'Opening locked doors.' },
                { name: 'MEDICINE', val: 60, info: 'Stimpak effectiveness.' },
                { name: 'MELEE WEAPONS', val: 40, info: 'Close quarters combat.' },
                { name: 'REPAIR', val: 90, info: 'Maintain equipment.' },
                { name: 'SCIENCE', val: 100, info: 'Terminal hacking proficiency.' },
                { name: 'SMALL GUNS', val: 95, info: 'Pistol and rifle accuracy.' },
                { name: 'SNEAK', val: 88, info: 'Stealth effectiveness.' },
                { name: 'SPEECH', val: 70, info: 'Influencing dialogue.' }
            ],
            PERKS: [
                { name: 'ACTION BOY', rank: 2, desc: 'Your AP regenerates 50% faster than before.' },
                { name: 'BLOODY MESS', rank: 1, desc: 'Spectacular combat deaths and +5% overall damage.' },
                { name: 'COMMANDO', rank: 2, desc: 'Accuracy with two-handed weapons in V.A.T.S. is increased by 25%.' },
                { name: 'GRIM REAPER', rank: 1, desc: 'A kill in V.A.T.S. restores all Action Points.' },
                { name: 'HACKER', rank: 3, desc: 'You can break into even the most secure Master Terminals.' },
                { name: 'SCROUNGER', rank: 2, desc: 'You find considerably more ammunition in containers.' }
            ],
            GENERAL: [
                { label: 'KILLS', val: '4,102' },
                { label: 'LOCATIONS', val: '215' },
                { label: 'LOCKS PICKED', val: '412' },
                { label: 'CRITICAL HITS', val: '822' },
                { label: 'KARMA', val: 'WANDERER' }
            ]
        }
    },
    INV: {
        tabs: ['WEAPONS', 'APPAREL', 'AID', 'MISC', 'AMMO'],
        content: {
            WEAPONS: [
                { name: '10MM PISTOL', dam: 22, wt: 3, val: 350, desc: 'A reliable, standard-issue sidearm for any wasteland explorer.' },
                { name: 'GAUSS RIFLE', dam: 115, wt: 14, val: 3200, desc: 'An advanced electromagnetic weapon with high penetration.' },
                { name: 'LASER RIFLE', dam: 48, wt: 9, val: 1800, desc: 'AER9 model. Standard energy weapon for the Brotherhood.' },
                { name: 'COMBAT KNIFE', dam: 12, wt: 1, val: 45, desc: 'A sharp, serrated blade for stealthy kills.' },
                { name: 'FAT MAN', dam: 450, wt: 30, val: 5000, desc: 'Experimental nuclear catapult. Use with extreme caution.' }
            ],
            APPAREL: [
                { name: 'VAULT 111 SUIT', dr: 10, wt: 2, val: 50, desc: 'Insulated, rubberized suit from your home vault.' },
                { name: 'COMBAT ARMOR', dr: 35, wt: 18, val: 850, desc: 'Standard pre-war military infantry protection.' },
                { name: 'POWER ARMOR T-51', dr: 60, wt: 45, val: 4500, desc: 'Highly advanced protection. Requires Fusion Core.' }
            ],
            AID: [
                { name: 'STIMPAK (24)', val: 'HEAL', wt: 0, desc: 'Medical injection that restores 30% of total HP.' },
                { name: 'RADAWAY (15)', val: 'RADS', wt: 1, desc: 'Chemical solution that flushes radiation from the blood.' },
                { name: 'PURIFIED WATER', val: 'HP+', wt: 1, desc: 'Clean, safe drinking water.' }
            ],
            MISC: [
                { name: 'BOBBY PIN (88)', val: 'TOOL', wt: 0 },
                { name: 'BOTTLECAP (24510)', val: 'CURR', wt: 0 },
                { name: 'HOLOTAPE - LOG 1', val: 'DATA', wt: 0.1 }
            ],
            AMMO: [
                { name: '10MM ROUND', val: '1,420', wt: 0.01 },
                { name: 'MF CELL', val: '645', wt: 0.02 },
                { name: 'MINI NUKE', val: '4', wt: 2.0 }
            ]
        }
    },
    DATA: {
        tabs: ['QUESTS', 'MAP', 'RADIO'],
        content: {
            QUESTS: [
                { name: 'THE BIG SEARCH', status: 'ACTIVE', desc: 'The settlers at Sanctuary are missing. Search the local ruins for clues.' },
                { name: 'OUT OF TIME', status: 'COMPLETED', desc: 'You have finally left the Vault. The world has changed.' },
                { name: 'RAIDER TROUBLES', status: 'FAILED', desc: 'Defend the farm from the raiding party.' }
            ],
            MAP: {
                loc: 'COMMONWEALTH RUINS',
                pos: 'SECTOR 7-G',
                markers: [
                    { name: 'SANCTUARY', x: 20, y: 30 },
                    { name: 'RED ROCKET', x: 45, y: 55 },
                    { name: 'CONCORD', x: 70, y: 80 }
                ]
            },
            RADIO: [
                { name: 'DIAMOND CITY RADIO', status: 'ON', song: 'Maybe' },
                { name: 'CLASSICAL RADIO', status: 'OFF', song: 'Symphony No. 5' },
                { name: 'ENCLAVE RADIO', status: 'OFF', song: 'Battle Hymn' }
            ]
        }
    }
};

const ui = {
    currentTab: 'STAT',
    currentSub: 'CND',
    isPowerOn: true,
    playerStats: { hp: 285, maxHp: 300, ap: 110, maxAp: 110 },

    init() {
        this.randomizeHealth();
        this.renderSubNav();
        this.renderContent();
        this.startGlitches();
        window.addEventListener('resize', () => this.autoScale());
        this.autoScale();
    },

    randomizeHealth() {
        this.playerStats.hp = Math.floor(Math.random() * (this.playerStats.maxHp - 50)) + 50;
        const limbs = DATA_CORE.STAT.content.CND.limbs;
        Object.keys(limbs).forEach(key => {
            limbs[key] = Math.floor(Math.random() * 80) + 20;
        });
        document.getElementById('f-hp').innerText = `HP ${this.playerStats.hp}/${this.playerStats.maxHp}`;
    },

    autoScale() {
        const chassis = document.getElementById('pip-chassis');
        const scale = Math.min(window.innerWidth / 950, window.innerHeight / 720);
        chassis.style.transform = scale < 1 ? `scale(${scale})` : `scale(1)`;
    },

    togglePower() {
        this.isPowerOn = !this.isPowerOn;
        document.getElementById('pip-chassis').classList.toggle('off', !this.isPowerOn);
        if (this.isPowerOn) {
            this.randomizeHealth();
            this.triggerFlicker(400);
            this.renderContent();
        }
    },

    changeMainTab(tab, el) {
        if (!this.isPowerOn) return;
        this.currentTab = tab;
        this.currentSub = DATA_CORE[tab].tabs[0];
        document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
        el.classList.add('active');
        this.triggerFlicker(100);
        this.renderSubNav();
        this.renderContent();
    },

    changeSubTab(sub, el) {
        if (!this.isPowerOn) return;
        this.currentSub = sub;
        document.querySelectorAll('.sub-tab').forEach(i => i.classList.remove('active'));
        el.classList.add('active');
        this.renderContent();
    },

    renderSubNav() {
        const container = document.getElementById('sub-nav');
        container.innerHTML = '';
        DATA_CORE[this.currentTab].tabs.forEach(tab => {
            const div = document.createElement('div');
            div.className = `sub-tab ${tab === this.currentSub ? 'active' : ''}`;
            div.innerText = tab;
            div.onclick = () => this.changeSubTab(tab, div);
            container.appendChild(div);
        });
    },

    renderContent() {
        const viewport = document.getElementById('viewport');
        viewport.innerHTML = '';
        const wrapper = document.createElement('div');
        wrapper.className = 'tab-transition';
        
        const data = DATA_CORE[this.currentTab].content[this.currentSub];

        switch(this.currentSub) {
            case 'CND': wrapper.innerHTML = this.getConditionHTML(data); break;
            case 'MAP': wrapper.innerHTML = this.getMapHTML(data); break;
            case 'RADIO': wrapper.innerHTML = this.getRadioHTML(data); break;
            default: wrapper.innerHTML = this.getListHTML(data);
        }

        viewport.appendChild(wrapper);
        this.initListEvents();
    },

    getConditionHTML(data) {
        const isHurt = Object.values(data.limbs).some(v => v < 50) || this.playerStats.hp < 100;
        const img = isHurt ? 'assets/screen/vbbrokenarm.png' : 'assets/screen/vbnormal.png';
        
        const limbMarker = (label, val, posClass) => {
            const color = val < 30 ? '#ff3333' : (val < 60 ? '#ffaa00' : '#1aff80');
            return `<div class="limb-indicator ${posClass}" style="color: ${color}; border-color: ${color};">${label} ${val}%</div>`;
        };

        return `
            <div class="condition-layout">
                <div class="vault-boy-visual">
                    <img src="${img}" class="vault-boy-img">
                    ${limbMarker('HEAD', data.limbs.head, 'limb-head')}
                    ${limbMarker('L.ARM', data.limbs.la, 'limb-la')}
                    ${limbMarker('R.ARM', data.limbs.ra, 'limb-ra')}
                    ${limbMarker('L.LEG', data.limbs.ll, 'limb-ll')}
                    ${limbMarker('R.LEG', data.limbs.rl, 'limb-rl')}
                </div>
                <div class="vital-stats">
                    ${data.vitals.map(v => `
                        <div class="progress-bar-wrap">
                            <div class="pb-label"><span>${v.label}</span><span>${v.val}/${v.max}</span></div>
                            <div class="pb-outer"><div class="pb-inner" style="width: ${(v.val/v.max)*100}%"></div></div>
                        </div>
                    `).join('')}
                    <div style="font-size:0.7rem; margin-top:20px; color:var(--pip-green-med);">
                        BIOMETRIC SCAN: ACTIVE<br>STATUS: ${this.playerStats.hp < 100 ? 'CRITICAL' : 'STABLE'}
                    </div>
                </div>
            </div>
        `;
    },

    getListHTML(items) {
        if (!items) return "NO DATA";
        return `
            <div class="list-container">
                <div class="scroll-list">
                    ${items.map((item, idx) => `
                        <div class="list-entry ${idx === 0 ? 'selected' : ''}" data-idx="${idx}">
                            <span>${item.name || item.label}</span>
                            <span>${item.val || item.status || (item.rank ? 'RANK '+item.rank : '')}</span>
                        </div>
                    `).join('')}
                </div>
                <div class="info-panel">
                    <div class="detail-box" id="detail-pane">
                        ${this.getDetailContent(items[0])}
                    </div>
                </div>
            </div>
        `;
    },

    getDetailContent(item) {
        if (!item) return "SELECT ENTRY";
        let extra = '';
        if (item.dam) extra = `<p>DAMAGE: ${item.dam}</p>`;
        if (item.dr) extra = `<p>DEFENSE: ${item.dr}</p>`;
        if (item.wt) extra += `<p>WEIGHT: ${item.wt}</p>`;
        
        return `
            <h3>${item.name || item.label}</h3>
            ${extra}
            <p>${item.desc || item.info || 'No further technical data available.'}</p>
        `;
    },

    getMapHTML(data) {
        return `
            <div class="map-container">
                ${data.markers.map(m => `
                    <div class="map-marker" style="top:${m.y}%; left:${m.x}%;"></div>
                    <div class="map-label" style="top:${m.y+4}%; left:${m.x+2}%;">${m.name}</div>
                `).join('')}
                <div style="position:absolute; bottom:10px; right:10px; font-size:0.7rem; background:black; padding:5px;">
                    LOCATION: ${data.loc}<br>COORD: ${data.pos}
                </div>
            </div>
        `;
    },

    getRadioHTML(data) {
        return `
            <div class="list-container">
                <div class="scroll-list">
                    ${data.map((station, idx) => `
                        <div class="list-entry ${idx === 0 ? 'selected' : ''}" data-idx="${idx}">
                            <span>${station.name}</span>
                            <span>${station.status}</span>
                        </div>
                    `).join('')}
                </div>
                <div class="info-panel" style="display:flex; flex-direction:column; justify-content:center; align-items:center;">
                    <div style="font-size:1.2rem; margin-bottom:10px;">SIGNAL STRENGTH</div>
                    <div class="radio-visualizer">
                        ${Array(15).fill(0).map(() => `<div class="wave-bar" style="animation-delay: ${Math.random()}s"></div>`).join('')}
                    </div>
                    <div style="margin-top:20px; text-align:center;">
                        NOW PLAYING:<br><span style="color:white;">${data[0].song}</span>
                    </div>
                </div>
            </div>
        `;
    },

    initListEvents() {
        const entries = document.querySelectorAll('.list-entry');
        const detailPane = document.getElementById('detail-pane');
        const content = DATA_CORE[this.currentTab].content[this.currentSub];
        
        entries.forEach(entry => {
            entry.onclick = () => {
                entries.forEach(e => e.classList.remove('selected'));
                entry.classList.add('selected');
                const idx = entry.getAttribute('data-idx');
                if (detailPane) detailPane.innerHTML = this.getDetailContent(content[idx]);
            };
        });
    },

    triggerFlicker(dur) {
        const screen = document.getElementById('crt-screen');
        screen.classList.add('flicker-heavy');
        setTimeout(() => screen.classList.remove('flicker-heavy'), dur);
    },

    startGlitches() {
        setInterval(() => {
            if (this.isPowerOn && Math.random() > 0.97) this.triggerFlicker(150);
        }, 2500);
    }
};

window.onload = () => ui.init();
</script>
</body>
</html>
